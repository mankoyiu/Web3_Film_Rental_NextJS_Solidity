"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/rentals/page",{

/***/ "(app-pages-browser)/./src/contexts/Web3Context.tsx":
/*!**************************************!*\
  !*** ./src/contexts/Web3Context.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Web3Provider: () => (/* binding */ Web3Provider),\n/* harmony export */   useWeb3: () => (/* binding */ useWeb3)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wagmi */ \"(app-pages-browser)/./node_modules/wagmi/dist/esm/hooks/useAccount.js\");\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wagmi */ \"(app-pages-browser)/./node_modules/wagmi/dist/esm/hooks/useConnect.js\");\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wagmi */ \"(app-pages-browser)/./node_modules/wagmi/dist/esm/hooks/useDisconnect.js\");\n/* harmony import */ var wagmi_connectors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! wagmi/connectors */ \"(app-pages-browser)/./node_modules/@wagmi/core/dist/esm/connectors/injected.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ethers */ \"(app-pages-browser)/./node_modules/ethers/lib.esm/providers/provider-browser.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ethers */ \"(app-pages-browser)/./node_modules/ethers/lib.esm/contract/contract.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ethers */ \"(app-pages-browser)/./node_modules/ethers/lib.esm/utils/units.js\");\n/* harmony import */ var _services_rentalStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/rentalStorage */ \"(app-pages-browser)/./src/services/rentalStorage.ts\");\n/* __next_internal_client_entry_do_not_use__ Web3Provider,useWeb3 auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n// Import ABI when available\nconst FILM_RENTAL_ABI = [\n    \"function addFilm(string memory _id, uint256 _rentalPrice) public\",\n    \"function rentFilm(string memory _filmId) public payable\",\n    \"function endRental(string memory _filmId) public\",\n    \"function getRentalPrice(string memory _filmId) public view returns (uint256)\",\n    \"function isFilmAvailable(string memory _filmId) public view returns (bool)\",\n    \"function getUserRentals(address _user) public view returns (tuple(string filmId, address renter, uint256 startTime, uint256 endTime, bool isActive)[] memory)\"\n];\n// Updated with the deployed contract address\nconst CONTRACT_ADDRESS = \"0x8D1517360886e85d8e94E3E64742A7637277c5f2\";\nconst Web3Context = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n// Local storage key for wallet connection state\nconst WALLET_CONNECTED_KEY = 'wallet_connected';\nfunction Web3Provider(param) {\n    let { children } = param;\n    _s();\n    const { address, isConnected } = (0,wagmi__WEBPACK_IMPORTED_MODULE_3__.useAccount)();\n    const { connectAsync } = (0,wagmi__WEBPACK_IMPORTED_MODULE_4__.useConnect)();\n    const { disconnect: wagmiDisconnect } = (0,wagmi__WEBPACK_IMPORTED_MODULE_5__.useDisconnect)();\n    const [contract, setContract] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [initialLoadComplete, setInitialLoadComplete] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Check localStorage on initial load\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Web3Provider.useEffect\": ()=>{\n            const checkStoredConnection = {\n                \"Web3Provider.useEffect.checkStoredConnection\": async ()=>{\n                    if (true) {\n                        const storedConnected = localStorage.getItem(WALLET_CONNECTED_KEY) === 'true';\n                        if (storedConnected && !isConnected) {\n                            try {\n                                // Try to reconnect wallet if it was previously connected\n                                await connectAsync({\n                                    connector: (0,wagmi_connectors__WEBPACK_IMPORTED_MODULE_6__.injected)()\n                                });\n                            } catch (err) {\n                                console.error('Failed to restore wallet connection:', err);\n                                localStorage.removeItem(WALLET_CONNECTED_KEY);\n                            }\n                        }\n                        setInitialLoadComplete(true);\n                    }\n                }\n            }[\"Web3Provider.useEffect.checkStoredConnection\"];\n            checkStoredConnection();\n        }\n    }[\"Web3Provider.useEffect\"], []);\n    // Update contract when connection changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Web3Provider.useEffect\": ()=>{\n            if (isConnected && address) {\n                // Save connection state to localStorage\n                if ( true && initialLoadComplete) {\n                    localStorage.setItem(WALLET_CONNECTED_KEY, 'true');\n                }\n                initializeContract();\n            } else {\n                setContract(null);\n                // Clear connection state from localStorage\n                if ( true && initialLoadComplete) {\n                    localStorage.removeItem(WALLET_CONNECTED_KEY);\n                }\n            }\n        }\n    }[\"Web3Provider.useEffect\"], [\n        isConnected,\n        address,\n        initialLoadComplete\n    ]);\n    const initializeContract = async ()=>{\n        try {\n            if ( false || !window.ethereum || !address) return;\n            const provider = new ethers__WEBPACK_IMPORTED_MODULE_7__.BrowserProvider(window.ethereum);\n            const signer = await provider.getSigner();\n            const contractInstance = new ethers__WEBPACK_IMPORTED_MODULE_8__.Contract(CONTRACT_ADDRESS, FILM_RENTAL_ABI, signer);\n            setContract(contractInstance);\n        } catch (err) {\n            setError('Failed to initialize contract: ' + ((err === null || err === void 0 ? void 0 : err.message) || err));\n        }\n    };\n    const connect = async ()=>{\n        setError(null);\n        try {\n            await connectAsync({\n                connector: (0,wagmi_connectors__WEBPACK_IMPORTED_MODULE_6__.injected)()\n            });\n        // Connection state is saved in the useEffect that watches isConnected\n        } catch (err) {\n            setError('Wallet connection failed: ' + ((err === null || err === void 0 ? void 0 : err.message) || err));\n        }\n    };\n    const disconnect = ()=>{\n        wagmiDisconnect();\n    // Connection state is cleared in the useEffect that watches isConnected\n    };\n    const rentFilm = async (filmId, price, filmTitle, filmPoster)=>{\n        if (!window.ethereum) throw new Error('No crypto wallet found. Please install MetaMask.');\n        if (!isConnected || !address) throw new Error('Wallet not connected');\n        try {\n            // Check if film is already rented by this user\n            if (true) {\n                const storedRentalsKey = \"rentals_\".concat(address.toLowerCase());\n                const storedRentals = localStorage.getItem(storedRentalsKey);\n                if (storedRentals) {\n                    const userRentals = JSON.parse(storedRentals);\n                    const now = new Date();\n                    // Check if this film is already in active rentals\n                    const isAlreadyRented = userRentals.some((rental)=>{\n                        return rental.filmId === filmId && new Date(rental.expiresAt) > now;\n                    });\n                    if (isAlreadyRented) {\n                        throw new Error('You have already rented this film. Check your rentals page to watch it.');\n                    }\n                }\n            }\n            const provider = new ethers__WEBPACK_IMPORTED_MODULE_7__.BrowserProvider(window.ethereum);\n            const signer = await provider.getSigner();\n            const userAddress = await signer.getAddress();\n            //ETH address that receive ETH from users\n            const adminAddress = '0xeC1f782d67575FE1E62078986b05a053bdD46602';\n            const ethBalance = await provider.getBalance(userAddress);\n            const priceWei = ethers__WEBPACK_IMPORTED_MODULE_9__.parseEther(price);\n            if (ethBalance < priceWei) {\n                throw new Error('Insufficient balance to rent this film.');\n            }\n            console.log('Renting film:', {\n                filmId,\n                price,\n                filmTitle\n            });\n            // Send ETH to admin\n            const tx = await signer.sendTransaction({\n                to: adminAddress,\n                value: priceWei\n            });\n            await tx.wait();\n            // Store rental information in localStorage\n            const now = Date.now();\n            const sevenDaysInMs = 7 * 24 * 60 * 60 * 1000;\n            const expiresAt = now + sevenDaysInMs;\n            const newRental = {\n                id: \"\".concat(filmId, \"-\").concat(now),\n                filmId: filmId,\n                title: filmTitle || \"Film \".concat(filmId),\n                poster: filmPoster || 'https://via.placeholder.com/300x450?text=Film',\n                rentedAt: new Date(now).toISOString(),\n                expiresAt: new Date(expiresAt).toISOString(),\n                status: 'active',\n                price: price\n            };\n            // Get existing rentals and add the new one\n            let userRentals = await (0,_services_rentalStorage__WEBPACK_IMPORTED_MODULE_2__.loadRentals)(userAddress);\n            userRentals.push(newRental);\n            // Save to both localStorage and server file storage\n            await (0,_services_rentalStorage__WEBPACK_IMPORTED_MODULE_2__.saveRentals)(userAddress, userRentals);\n            console.log('Rental saved to storage:', newRental);\n            // Update film rental count and revenue in films.json\n            try {\n                // Fetch current films data\n                const filmsResponse = await fetch('/api/films');\n                if (filmsResponse.ok) {\n                    const films = await filmsResponse.json();\n                    // Find the film that was rented\n                    const filmIndex = films.findIndex((film)=>film.id === filmId);\n                    if (filmIndex !== -1) {\n                        // Increment rental count\n                        films[filmIndex].rentals = (films[filmIndex].rentals || 0) + 1;\n                        // Add revenue (convert price string to number)\n                        films[filmIndex].revenue = (films[filmIndex].revenue || 0) + parseFloat(price);\n                        console.log(\"Updated film \".concat(filmId, \" rentals to \").concat(films[filmIndex].rentals, \" and revenue to \").concat(films[filmIndex].revenue));\n                        // Save updated films data back to the server\n                        await fetch('/api/films', {\n                            method: 'POST',\n                            headers: {\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(films)\n                        });\n                        console.log('Films data updated successfully');\n                    }\n                }\n            } catch (updateError) {\n                console.error('Error updating film rental statistics:', updateError);\n            // Continue execution even if statistics update fails\n            }\n            return tx;\n        } catch (err) {\n            var _err_message;\n            console.error('Failed to rent film:', err);\n            // Handle MetaMask user rejection\n            if ((err === null || err === void 0 ? void 0 : err.code) === 4001 || (err === null || err === void 0 ? void 0 : err.reason) === 'rejected' || (err === null || err === void 0 ? void 0 : (_err_message = err.message) === null || _err_message === void 0 ? void 0 : _err_message.includes('User denied transaction signature')) || (err === null || err === void 0 ? void 0 : err.code) === 'ACTION_REJECTED') {\n                throw new Error('Transaction cancelled by user.');\n            }\n            throw new Error((err === null || err === void 0 ? void 0 : err.message) || 'Failed to rent film.');\n        }\n    };\n    const endRental = async (filmId)=>{\n        // Web3 functionality temporarily disabled while we focus on traditional auth\n        console.log('Web3 functionality temporarily disabled');\n        throw new Error('Web3 functionality temporarily disabled');\n    /*\n    if (!contract) throw new Error('Contract not initialized')\n    try {\n      const tx = await contract.endRental(filmId)\n      await tx.wait()\n    } catch (error) {\n      console.error('Failed to end rental:', error)\n      throw error\n    }\n    */ };\n    const getFilmPrice = async (filmId)=>{\n        // Web3 functionality temporarily disabled while we focus on traditional auth\n        console.log('Web3 functionality temporarily disabled');\n        return '0.01' // Return a default price\n        ;\n    /*\n    if (!contract) throw new Error('Contract not initialized')\n    try {\n      const price = await contract.getRentalPrice(filmId)\n      const ethPrice = ethers.formatEther(price.toString())\n      return ethPrice\n    } catch (error) {\n      console.error('Failed to get film price:', error)\n      throw error\n    }\n    */ };\n    const isFilmAvailable = async (filmId)=>{\n        // Web3 functionality temporarily disabled while we focus on traditional auth\n        console.log('Web3 functionality temporarily disabled');\n        return true // Default to available\n        ;\n    /*\n    if (!contract) throw new Error('Contract not initialized')\n    try {\n      return await contract.isFilmAvailable(filmId)\n    } catch (error) {\n      console.error('Failed to check film availability:', error)\n      throw error\n    }\n    */ };\n    const getUserRentals = async ()=>{\n        if (!window.ethereum) throw new Error('No crypto wallet found. Please install MetaMask.');\n        if (!isConnected || !address) throw new Error('Wallet not connected');\n        try {\n            console.log('Fetching rentals for address:', address);\n            // Load rentals from both localStorage and server file storage\n            const userRentals = await (0,_services_rentalStorage__WEBPACK_IMPORTED_MODULE_2__.loadRentals)(address);\n            console.log('Retrieved rentals from storage:', userRentals);\n            return userRentals;\n        } catch (error) {\n            console.error('Failed to get user rentals:', error);\n            throw error;\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Web3Context.Provider, {\n        value: {\n            isConnected,\n            account: address,\n            connect,\n            disconnect,\n            rentFilm,\n            endRental,\n            getFilmPrice,\n            isFilmAvailable,\n            getUserRentals,\n            contract\n        },\n        children: [\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    color: 'red',\n                    marginBottom: 8\n                },\n                children: [\n                    \"Wallet Error: \",\n                    error\n                ]\n            }, void 0, true, {\n                fileName: \"/Volumes/ssd/project/src/contexts/Web3Context.tsx\",\n                lineNumber: 312,\n                columnNumber: 17\n            }, this),\n            children\n        ]\n    }, void 0, true, {\n        fileName: \"/Volumes/ssd/project/src/contexts/Web3Context.tsx\",\n        lineNumber: 300,\n        columnNumber: 5\n    }, this);\n}\n_s(Web3Provider, \"5RX3IK99AMz7Wy7ih2z7+VKCA5I=\", false, function() {\n    return [\n        wagmi__WEBPACK_IMPORTED_MODULE_3__.useAccount,\n        wagmi__WEBPACK_IMPORTED_MODULE_4__.useConnect,\n        wagmi__WEBPACK_IMPORTED_MODULE_5__.useDisconnect\n    ];\n});\n_c = Web3Provider;\nfunction useWeb3() {\n    _s1();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(Web3Context);\n    if (context === undefined) {\n        throw new Error('useWeb3 must be used within a Web3Provider');\n    }\n    return context;\n}\n_s1(useWeb3, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"Web3Provider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb250ZXh0cy9XZWIzQ29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWlGO0FBQ3BCO0FBQ2xCO0FBQ0Q7QUFDa0M7QUFFNUUsNEJBQTRCO0FBQzVCLE1BQU1ZLGtCQUFrQjtJQUN0QjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVELDZDQUE2QztBQUM3QyxNQUFNQyxtQkFBbUI7QUFlekIsTUFBTUMsNEJBQWNkLG9EQUFhQSxDQUE4QmU7QUFFL0QsZ0RBQWdEO0FBQ2hELE1BQU1DLHVCQUF1QjtBQUV0QixTQUFTQyxhQUFhLEtBQXFDO1FBQXJDLEVBQUVDLFFBQVEsRUFBMkIsR0FBckM7O0lBQzNCLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxXQUFXLEVBQUUsR0FBR2hCLGlEQUFVQTtJQUMzQyxNQUFNLEVBQUVpQixZQUFZLEVBQUUsR0FBR2hCLGlEQUFVQTtJQUNuQyxNQUFNLEVBQUVpQixZQUFZQyxlQUFlLEVBQUUsR0FBR2pCLG9EQUFhQTtJQUNyRCxNQUFNLENBQUNrQixVQUFVQyxZQUFZLEdBQUd2QiwrQ0FBUUEsQ0FBa0I7SUFDMUQsTUFBTSxDQUFDd0IsT0FBT0MsU0FBUyxHQUFHekIsK0NBQVFBLENBQWdCO0lBQ2xELE1BQU0sQ0FBQzBCLHFCQUFxQkMsdUJBQXVCLEdBQUczQiwrQ0FBUUEsQ0FBQztJQUUvRCxxQ0FBcUM7SUFDckNDLGdEQUFTQTtrQ0FBQztZQUNSLE1BQU0yQjtnRUFBd0I7b0JBQzVCLElBQUksSUFBNkIsRUFBRTt3QkFDakMsTUFBTUMsa0JBQWtCQyxhQUFhQyxPQUFPLENBQUNqQiwwQkFBMEI7d0JBRXZFLElBQUllLG1CQUFtQixDQUFDWCxhQUFhOzRCQUNuQyxJQUFJO2dDQUNGLHlEQUF5RDtnQ0FDekQsTUFBTUMsYUFBYTtvQ0FBRWEsV0FBVzNCLDBEQUFRQTtnQ0FBRzs0QkFDN0MsRUFBRSxPQUFPNEIsS0FBSztnQ0FDWkMsUUFBUVYs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QUFDOztvQkFBRztvQkFBZTNGOzs7Ozs7O1lBQ2xFUjs7Ozs7OztBQUdQO0dBcFJnQkQ7O1FBQ21CYiw2Q0FBVUE7UUFDbEJDLDZDQUFVQTtRQUNLQyxnREFBYUE7OztLQUh2Q1c7QUFzUlQsU0FBU3FHOztJQUNkLE1BQU1DLFVBQVV0SCxpREFBVUEsQ0FBQ2E7SUFDM0IsSUFBSXlHLFlBQVl4RyxXQUFXO1FBQ3pCLE1BQU0sSUFBSXVDLE1BQU07SUFDbEI7SUFDQSxPQUFPaUU7QUFDVDtJQU5nQkQiLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL3NzZC9wcm9qZWN0L3NyYy9jb250ZXh0cy9XZWIzQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIFJlYWN0Tm9kZSwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlQWNjb3VudCwgdXNlQ29ubmVjdCwgdXNlRGlzY29ubmVjdCB9IGZyb20gJ3dhZ21pJ1xuaW1wb3J0IHsgaW5qZWN0ZWQgfSBmcm9tICd3YWdtaS9jb25uZWN0b3JzJ1xuaW1wb3J0IHsgQ29udHJhY3QsIGV0aGVycyB9IGZyb20gJ2V0aGVycyc7XG5pbXBvcnQgeyBzYXZlUmVudGFscywgbG9hZFJlbnRhbHMsIFJlbnRhbCB9IGZyb20gJ0Avc2VydmljZXMvcmVudGFsU3RvcmFnZSc7XG5cbi8vIEltcG9ydCBBQkkgd2hlbiBhdmFpbGFibGVcbmNvbnN0IEZJTE1fUkVOVEFMX0FCSSA9IFtcbiAgXCJmdW5jdGlvbiBhZGRGaWxtKHN0cmluZyBtZW1vcnkgX2lkLCB1aW50MjU2IF9yZW50YWxQcmljZSkgcHVibGljXCIsXG4gIFwiZnVuY3Rpb24gcmVudEZpbG0oc3RyaW5nIG1lbW9yeSBfZmlsbUlkKSBwdWJsaWMgcGF5YWJsZVwiLFxuICBcImZ1bmN0aW9uIGVuZFJlbnRhbChzdHJpbmcgbWVtb3J5IF9maWxtSWQpIHB1YmxpY1wiLFxuICBcImZ1bmN0aW9uIGdldFJlbnRhbFByaWNlKHN0cmluZyBtZW1vcnkgX2ZpbG1JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NilcIixcbiAgXCJmdW5jdGlvbiBpc0ZpbG1BdmFpbGFibGUoc3RyaW5nIG1lbW9yeSBfZmlsbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKVwiLFxuICBcImZ1bmN0aW9uIGdldFVzZXJSZW50YWxzKGFkZHJlc3MgX3VzZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHR1cGxlKHN0cmluZyBmaWxtSWQsIGFkZHJlc3MgcmVudGVyLCB1aW50MjU2IHN0YXJ0VGltZSwgdWludDI1NiBlbmRUaW1lLCBib29sIGlzQWN0aXZlKVtdIG1lbW9yeSlcIlxuXTtcblxuLy8gVXBkYXRlZCB3aXRoIHRoZSBkZXBsb3llZCBjb250cmFjdCBhZGRyZXNzXG5jb25zdCBDT05UUkFDVF9BRERSRVNTID0gXCIweDhEMTUxNzM2MDg4NmU4NWQ4ZTk0RTNFNjQ3NDJBNzYzNzI3N2M1ZjJcIjtcblxuaW50ZXJmYWNlIFdlYjNDb250ZXh0VHlwZSB7XG4gIGlzQ29ubmVjdGVkOiBib29sZWFuXG4gIGFjY291bnQ6IHN0cmluZyB8IHVuZGVmaW5lZFxuICBjb25uZWN0OiAoKSA9PiBQcm9taXNlPHZvaWQ+XG4gIGRpc2Nvbm5lY3Q6ICgpID0+IHZvaWRcbiAgcmVudEZpbG06IChmaWxtSWQ6IHN0cmluZywgcHJpY2U6IHN0cmluZywgZmlsbVRpdGxlPzogc3RyaW5nLCBmaWxtUG9zdGVyPzogc3RyaW5nKSA9PiBQcm9taXNlPGFueT5cbiAgZW5kUmVudGFsOiAoZmlsbUlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD5cbiAgZ2V0RmlsbVByaWNlOiAoZmlsbUlkOiBzdHJpbmcpID0+IFByb21pc2U8c3RyaW5nPlxuICBpc0ZpbG1BdmFpbGFibGU6IChmaWxtSWQ6IHN0cmluZykgPT4gUHJvbWlzZTxib29sZWFuPlxuICBnZXRVc2VyUmVudGFsczogKCkgPT4gUHJvbWlzZTxhbnlbXT5cbiAgY29udHJhY3Q6IENvbnRyYWN0IHwgbnVsbFxufVxuXG5jb25zdCBXZWIzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8V2ViM0NvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG5cbi8vIExvY2FsIHN0b3JhZ2Uga2V5IGZvciB3YWxsZXQgY29ubmVjdGlvbiBzdGF0ZVxuY29uc3QgV0FMTEVUX0NPTk5FQ1RFRF9LRVkgPSAnd2FsbGV0X2Nvbm5lY3RlZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBXZWIzUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfSkge1xuICBjb25zdCB7IGFkZHJlc3MsIGlzQ29ubmVjdGVkIH0gPSB1c2VBY2NvdW50KCk7XG4gIGNvbnN0IHsgY29ubmVjdEFzeW5jIH0gPSB1c2VDb25uZWN0KCk7XG4gIGNvbnN0IHsgZGlzY29ubmVjdDogd2FnbWlEaXNjb25uZWN0IH0gPSB1c2VEaXNjb25uZWN0KCk7XG4gIGNvbnN0IFtjb250cmFjdCwgc2V0Q29udHJhY3RdID0gdXNlU3RhdGU8Q29udHJhY3QgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2luaXRpYWxMb2FkQ29tcGxldGUsIHNldEluaXRpYWxMb2FkQ29tcGxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIENoZWNrIGxvY2FsU3RvcmFnZSBvbiBpbml0aWFsIGxvYWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjaGVja1N0b3JlZENvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVkQ29ubmVjdGVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oV0FMTEVUX0NPTk5FQ1RFRF9LRVkpID09PSAndHJ1ZSc7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3RvcmVkQ29ubmVjdGVkICYmICFpc0Nvbm5lY3RlZCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUcnkgdG8gcmVjb25uZWN0IHdhbGxldCBpZiBpdCB3YXMgcHJldmlvdXNseSBjb25uZWN0ZWRcbiAgICAgICAgICAgIGF3YWl0IGNvbm5lY3RBc3luYyh7IGNvbm5lY3RvcjogaW5qZWN0ZWQoKSB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZXN0b3JlIHdhbGxldCBjb25uZWN0aW9uOicsIGVycik7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShXQUxMRVRfQ09OTkVDVEVEX0tFWSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzZXRJbml0aWFsTG9hZENvbXBsZXRlKHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY2hlY2tTdG9yZWRDb25uZWN0aW9uKCk7XG4gIH0sIFtdKTtcblxuICAvLyBVcGRhdGUgY29udHJhY3Qgd2hlbiBjb25uZWN0aW9uIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNDb25uZWN0ZWQgJiYgYWRkcmVzcykge1xuICAgICAgLy8gU2F2ZSBjb25uZWN0aW9uIHN0YXRlIHRvIGxvY2FsU3RvcmFnZVxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIGluaXRpYWxMb2FkQ29tcGxldGUpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oV0FMTEVUX0NPTk5FQ1RFRF9LRVksICd0cnVlJyk7XG4gICAgICB9XG4gICAgICBpbml0aWFsaXplQ29udHJhY3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q29udHJhY3QobnVsbCk7XG4gICAgICAvLyBDbGVhciBjb25uZWN0aW9uIHN0YXRlIGZyb20gbG9jYWxTdG9yYWdlXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5pdGlhbExvYWRDb21wbGV0ZSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShXQUxMRVRfQ09OTkVDVEVEX0tFWSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbaXNDb25uZWN0ZWQsIGFkZHJlc3MsIGluaXRpYWxMb2FkQ29tcGxldGVdKTtcblxuICBjb25zdCBpbml0aWFsaXplQ29udHJhY3QgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCAhd2luZG93LmV0aGVyZXVtIHx8ICFhZGRyZXNzKSByZXR1cm47XG4gICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBldGhlcnMuQnJvd3NlclByb3ZpZGVyKHdpbmRvdy5ldGhlcmV1bSk7XG4gICAgICBjb25zdCBzaWduZXIgPSBhd2FpdCBwcm92aWRlci5nZXRTaWduZXIoKTtcbiAgICAgIGNvbnN0IGNvbnRyYWN0SW5zdGFuY2UgPSBuZXcgQ29udHJhY3QoQ09OVFJBQ1RfQUREUkVTUywgRklMTV9SRU5UQUxfQUJJLCBzaWduZXIpO1xuICAgICAgc2V0Q29udHJhY3QoY29udHJhY3RJbnN0YW5jZSk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBjb250cmFjdDogJyArIChlcnI/Lm1lc3NhZ2UgfHwgZXJyKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNvbm5lY3QgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNvbm5lY3RBc3luYyh7IGNvbm5lY3RvcjogaW5qZWN0ZWQoKSB9KTtcbiAgICAgIC8vIENvbm5lY3Rpb24gc3RhdGUgaXMgc2F2ZWQgaW4gdGhlIHVzZUVmZmVjdCB0aGF0IHdhdGNoZXMgaXNDb25uZWN0ZWRcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgc2V0RXJyb3IoJ1dhbGxldCBjb25uZWN0aW9uIGZhaWxlZDogJyArIChlcnI/Lm1lc3NhZ2UgfHwgZXJyKSk7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3QgZGlzY29ubmVjdCA9ICgpID0+IHtcbiAgICB3YWdtaURpc2Nvbm5lY3QoKTtcbiAgICAvLyBDb25uZWN0aW9uIHN0YXRlIGlzIGNsZWFyZWQgaW4gdGhlIHVzZUVmZmVjdCB0aGF0IHdhdGNoZXMgaXNDb25uZWN0ZWRcbiAgfTtcblxuICBjb25zdCByZW50RmlsbSA9IGFzeW5jIChmaWxtSWQ6IHN0cmluZywgcHJpY2U6IHN0cmluZywgZmlsbVRpdGxlPzogc3RyaW5nLCBmaWxtUG9zdGVyPzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCF3aW5kb3cuZXRoZXJldW0pIHRocm93IG5ldyBFcnJvcignTm8gY3J5cHRvIHdhbGxldCBmb3VuZC4gUGxlYXNlIGluc3RhbGwgTWV0YU1hc2suJyk7XG4gICAgaWYgKCFpc0Nvbm5lY3RlZCB8fCAhYWRkcmVzcykgdGhyb3cgbmV3IEVycm9yKCdXYWxsZXQgbm90IGNvbm5lY3RlZCcpO1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBmaWxtIGlzIGFscmVhZHkgcmVudGVkIGJ5IHRoaXMgdXNlclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlZFJlbnRhbHNLZXkgPSBgcmVudGFsc18ke2FkZHJlc3MudG9Mb3dlckNhc2UoKX1gO1xuICAgICAgICBjb25zdCBzdG9yZWRSZW50YWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmVkUmVudGFsc0tleSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3RvcmVkUmVudGFscykge1xuICAgICAgICAgIGNvbnN0IHVzZXJSZW50YWxzID0gSlNPTi5wYXJzZShzdG9yZWRSZW50YWxzKTtcbiAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZmlsbSBpcyBhbHJlYWR5IGluIGFjdGl2ZSByZW50YWxzXG4gICAgICAgICAgY29uc3QgaXNBbHJlYWR5UmVudGVkID0gdXNlclJlbnRhbHMuc29tZSgocmVudGFsOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZW50YWwuZmlsbUlkID09PSBmaWxtSWQgJiYgbmV3IERhdGUocmVudGFsLmV4cGlyZXNBdCkgPiBub3c7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGlzQWxyZWFkeVJlbnRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgaGF2ZSBhbHJlYWR5IHJlbnRlZCB0aGlzIGZpbG0uIENoZWNrIHlvdXIgcmVudGFscyBwYWdlIHRvIHdhdGNoIGl0LicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBldGhlcnMuQnJvd3NlclByb3ZpZGVyKHdpbmRvdy5ldGhlcmV1bSk7XG4gICAgICBjb25zdCBzaWduZXIgPSBhd2FpdCBwcm92aWRlci5nZXRTaWduZXIoKTtcbiAgICAgIGNvbnN0IHVzZXJBZGRyZXNzID0gYXdhaXQgc2lnbmVyLmdldEFkZHJlc3MoKTtcbiAgICAgIC8vRVRIIGFkZHJlc3MgdGhhdCByZWNlaXZlIEVUSCBmcm9tIHVzZXJzXG4gICAgICBjb25zdCBhZG1pbkFkZHJlc3MgPSAnMHhlQzFmNzgyZDY3NTc1RkUxRTYyMDc4OTg2YjA1YTA1M2JkRDQ2NjAyJztcbiAgICAgIGNvbnN0IGV0aEJhbGFuY2UgPSBhd2FpdCBwcm92aWRlci5nZXRCYWxhbmNlKHVzZXJBZGRyZXNzKTtcbiAgICAgIGNvbnN0IHByaWNlV2VpID0gZXRoZXJzLnBhcnNlRXRoZXIocHJpY2UpO1xuICAgICAgaWYgKGV0aEJhbGFuY2UgPCBwcmljZVdlaSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luc3VmZmljaWVudCBiYWxhbmNlIHRvIHJlbnQgdGhpcyBmaWxtLicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnUmVudGluZyBmaWxtOicsIHsgZmlsbUlkLCBwcmljZSwgZmlsbVRpdGxlIH0pO1xuICAgICAgXG4gICAgICAvLyBTZW5kIEVUSCB0byBhZG1pblxuICAgICAgY29uc3QgdHggPSBhd2FpdCBzaWduZXIuc2VuZFRyYW5zYWN0aW9uKHtcbiAgICAgICAgdG86IGFkbWluQWRkcmVzcyxcbiAgICAgICAgdmFsdWU6IHByaWNlV2VpXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHR4LndhaXQoKTtcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgcmVudGFsIGluZm9ybWF0aW9uIGluIGxvY2FsU3RvcmFnZVxuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHNldmVuRGF5c0luTXMgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5vdyArIHNldmVuRGF5c0luTXM7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1JlbnRhbCA9IHtcbiAgICAgICAgaWQ6IGAke2ZpbG1JZH0tJHtub3d9YCxcbiAgICAgICAgZmlsbUlkOiBmaWxtSWQsXG4gICAgICAgIHRpdGxlOiBmaWxtVGl0bGUgfHwgYEZpbG0gJHtmaWxtSWR9YCxcbiAgICAgICAgcG9zdGVyOiBmaWxtUG9zdGVyIHx8ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vMzAweDQ1MD90ZXh0PUZpbG0nLFxuICAgICAgICByZW50ZWRBdDogbmV3IERhdGUobm93KS50b0lTT1N0cmluZygpLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKGV4cGlyZXNBdCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyBhcyBjb25zdCxcbiAgICAgICAgcHJpY2U6IHByaWNlXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBHZXQgZXhpc3RpbmcgcmVudGFscyBhbmQgYWRkIHRoZSBuZXcgb25lXG4gICAgICBsZXQgdXNlclJlbnRhbHMgPSBhd2FpdCBsb2FkUmVudGFscyh1c2VyQWRkcmVzcyk7XG4gICAgICB1c2VyUmVudGFscy5wdXNoKG5ld1JlbnRhbCk7XG4gICAgICBcbiAgICAgIC8vIFNhdmUgdG8gYm90aCBsb2NhbFN0b3JhZ2UgYW5kIHNlcnZlciBmaWxlIHN0b3JhZ2VcbiAgICAgIGF3YWl0IHNhdmVSZW50YWxzKHVzZXJBZGRyZXNzLCB1c2VyUmVudGFscyk7XG4gICAgICBjb25zb2xlLmxvZygnUmVudGFsIHNhdmVkIHRvIHN0b3JhZ2U6JywgbmV3UmVudGFsKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGZpbG0gcmVudGFsIGNvdW50IGFuZCByZXZlbnVlIGluIGZpbG1zLmpzb25cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIGN1cnJlbnQgZmlsbXMgZGF0YVxuICAgICAgICBjb25zdCBmaWxtc1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvZmlsbXMnKTtcbiAgICAgICAgaWYgKGZpbG1zUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zdCBmaWxtcyA9IGF3YWl0IGZpbG1zUmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZpbmQgdGhlIGZpbG0gdGhhdCB3YXMgcmVudGVkXG4gICAgICAgICAgY29uc3QgZmlsbUluZGV4ID0gZmlsbXMuZmluZEluZGV4KChmaWxtOiBhbnkpID0+IGZpbG0uaWQgPT09IGZpbG1JZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZpbG1JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIEluY3JlbWVudCByZW50YWwgY291bnRcbiAgICAgICAgICAgIGZpbG1zW2ZpbG1JbmRleF0ucmVudGFscyA9IChmaWxtc1tmaWxtSW5kZXhdLnJlbnRhbHMgfHwgMCkgKyAxO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgcmV2ZW51ZSAoY29udmVydCBwcmljZSBzdHJpbmcgdG8gbnVtYmVyKVxuICAgICAgICAgICAgZmlsbXNbZmlsbUluZGV4XS5yZXZlbnVlID0gKGZpbG1zW2ZpbG1JbmRleF0ucmV2ZW51ZSB8fCAwKSArIHBhcnNlRmxvYXQocHJpY2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVXBkYXRlZCBmaWxtICR7ZmlsbUlkfSByZW50YWxzIHRvICR7ZmlsbXNbZmlsbUluZGV4XS5yZW50YWxzfSBhbmQgcmV2ZW51ZSB0byAke2ZpbG1zW2ZpbG1JbmRleF0ucmV2ZW51ZX1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2F2ZSB1cGRhdGVkIGZpbG1zIGRhdGEgYmFjayB0byB0aGUgc2VydmVyXG4gICAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS9maWxtcycsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShmaWxtcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmlsbXMgZGF0YSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZmlsbSByZW50YWwgc3RhdGlzdGljczonLCB1cGRhdGVFcnJvcik7XG4gICAgICAgIC8vIENvbnRpbnVlIGV4ZWN1dGlvbiBldmVuIGlmIHN0YXRpc3RpY3MgdXBkYXRlIGZhaWxzXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB0eDtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlbnQgZmlsbTonLCBlcnIpO1xuICAgICAgLy8gSGFuZGxlIE1ldGFNYXNrIHVzZXIgcmVqZWN0aW9uXG4gICAgICBpZiAoXG4gICAgICAgIChlcnI/LmNvZGUgPT09IDQwMDEpIHx8XG4gICAgICAgIChlcnI/LnJlYXNvbiA9PT0gJ3JlamVjdGVkJykgfHxcbiAgICAgICAgKGVycj8ubWVzc2FnZT8uaW5jbHVkZXMoJ1VzZXIgZGVuaWVkIHRyYW5zYWN0aW9uIHNpZ25hdHVyZScpKSB8fFxuICAgICAgICAoZXJyPy5jb2RlID09PSAnQUNUSU9OX1JFSkVDVEVEJylcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGNhbmNlbGxlZCBieSB1c2VyLicpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHJlbnQgZmlsbS4nKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBlbmRSZW50YWwgPSBhc3luYyAoZmlsbUlkOiBzdHJpbmcpID0+IHtcbiAgICAvLyBXZWIzIGZ1bmN0aW9uYWxpdHkgdGVtcG9yYXJpbHkgZGlzYWJsZWQgd2hpbGUgd2UgZm9jdXMgb24gdHJhZGl0aW9uYWwgYXV0aFxuICAgIGNvbnNvbGUubG9nKCdXZWIzIGZ1bmN0aW9uYWxpdHkgdGVtcG9yYXJpbHkgZGlzYWJsZWQnKVxuICAgIHRocm93IG5ldyBFcnJvcignV2ViMyBmdW5jdGlvbmFsaXR5IHRlbXBvcmFyaWx5IGRpc2FibGVkJylcbiAgICAvKlxuICAgIGlmICghY29udHJhY3QpIHRocm93IG5ldyBFcnJvcignQ29udHJhY3Qgbm90IGluaXRpYWxpemVkJylcbiAgICB0cnkge1xuICAgICAgY29uc3QgdHggPSBhd2FpdCBjb250cmFjdC5lbmRSZW50YWwoZmlsbUlkKVxuICAgICAgYXdhaXQgdHgud2FpdCgpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBlbmQgcmVudGFsOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gICAgKi9cbiAgfVxuXG4gIGNvbnN0IGdldEZpbG1QcmljZSA9IGFzeW5jIChmaWxtSWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgLy8gV2ViMyBmdW5jdGlvbmFsaXR5IHRlbXBvcmFyaWx5IGRpc2FibGVkIHdoaWxlIHdlIGZvY3VzIG9uIHRyYWRpdGlvbmFsIGF1dGhcbiAgICBjb25zb2xlLmxvZygnV2ViMyBmdW5jdGlvbmFsaXR5IHRlbXBvcmFyaWx5IGRpc2FibGVkJylcbiAgICByZXR1cm4gJzAuMDEnIC8vIFJldHVybiBhIGRlZmF1bHQgcHJpY2VcbiAgICAvKlxuICAgIGlmICghY29udHJhY3QpIHRocm93IG5ldyBFcnJvcignQ29udHJhY3Qgbm90IGluaXRpYWxpemVkJylcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJpY2UgPSBhd2FpdCBjb250cmFjdC5nZXRSZW50YWxQcmljZShmaWxtSWQpXG4gICAgICBjb25zdCBldGhQcmljZSA9IGV0aGVycy5mb3JtYXRFdGhlcihwcmljZS50b1N0cmluZygpKVxuICAgICAgcmV0dXJuIGV0aFByaWNlXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgZmlsbSBwcmljZTonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICAgICovXG4gIH1cblxuICBjb25zdCBpc0ZpbG1BdmFpbGFibGUgPSBhc3luYyAoZmlsbUlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAvLyBXZWIzIGZ1bmN0aW9uYWxpdHkgdGVtcG9yYXJpbHkgZGlzYWJsZWQgd2hpbGUgd2UgZm9jdXMgb24gdHJhZGl0aW9uYWwgYXV0aFxuICAgIGNvbnNvbGUubG9nKCdXZWIzIGZ1bmN0aW9uYWxpdHkgdGVtcG9yYXJpbHkgZGlzYWJsZWQnKVxuICAgIHJldHVybiB0cnVlIC8vIERlZmF1bHQgdG8gYXZhaWxhYmxlXG4gICAgLypcbiAgICBpZiAoIWNvbnRyYWN0KSB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRyYWN0IG5vdCBpbml0aWFsaXplZCcpXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBjb250cmFjdC5pc0ZpbG1BdmFpbGFibGUoZmlsbUlkKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2hlY2sgZmlsbSBhdmFpbGFiaWxpdHk6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgICAqL1xuICB9XG5cbiAgY29uc3QgZ2V0VXNlclJlbnRhbHMgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF3aW5kb3cuZXRoZXJldW0pIHRocm93IG5ldyBFcnJvcignTm8gY3J5cHRvIHdhbGxldCBmb3VuZC4gUGxlYXNlIGluc3RhbGwgTWV0YU1hc2suJyk7XG4gICAgaWYgKCFpc0Nvbm5lY3RlZCB8fCAhYWRkcmVzcykgdGhyb3cgbmV3IEVycm9yKCdXYWxsZXQgbm90IGNvbm5lY3RlZCcpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgcmVudGFscyBmb3IgYWRkcmVzczonLCBhZGRyZXNzKTtcbiAgICAgIFxuICAgICAgLy8gTG9hZCByZW50YWxzIGZyb20gYm90aCBsb2NhbFN0b3JhZ2UgYW5kIHNlcnZlciBmaWxlIHN0b3JhZ2VcbiAgICAgIGNvbnN0IHVzZXJSZW50YWxzID0gYXdhaXQgbG9hZFJlbnRhbHMoYWRkcmVzcyk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdSZXRyaWV2ZWQgcmVudGFscyBmcm9tIHN0b3JhZ2U6JywgdXNlclJlbnRhbHMpO1xuICAgICAgcmV0dXJuIHVzZXJSZW50YWxzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHVzZXIgcmVudGFsczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxXZWIzQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17e1xuICAgICAgaXNDb25uZWN0ZWQsXG4gICAgICBhY2NvdW50OiBhZGRyZXNzLFxuICAgICAgY29ubmVjdCxcbiAgICAgIGRpc2Nvbm5lY3QsXG4gICAgICByZW50RmlsbSxcbiAgICAgIGVuZFJlbnRhbCxcbiAgICAgIGdldEZpbG1QcmljZSxcbiAgICAgIGlzRmlsbUF2YWlsYWJsZSxcbiAgICAgIGdldFVzZXJSZW50YWxzLFxuICAgICAgY29udHJhY3RcbiAgICB9fT5cbiAgICAgIHtlcnJvciAmJiA8ZGl2IHN0eWxlPXt7Y29sb3I6J3JlZCcsbWFyZ2luQm90dG9tOjh9fT5XYWxsZXQgRXJyb3I6IHtlcnJvcn08L2Rpdj59XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9XZWIzQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVdlYjMoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFdlYjNDb250ZXh0KVxuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VXZWIzIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBXZWIzUHJvdmlkZXInKVxuICB9XG4gIHJldHVybiBjb250ZXh0XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VBY2NvdW50IiwidXNlQ29ubmVjdCIsInVzZURpc2Nvbm5lY3QiLCJpbmplY3RlZCIsIkNvbnRyYWN0IiwiZXRoZXJzIiwic2F2ZVJlbnRhbHMiLCJsb2FkUmVudGFscyIsIkZJTE1fUkVOVEFMX0FCSSIsIkNPTlRSQUNUX0FERFJFU1MiLCJXZWIzQ29udGV4dCIsInVuZGVmaW5lZCIsIldBTExFVF9DT05ORUNURURfS0VZIiwiV2ViM1Byb3ZpZGVyIiwiY2hpbGRyZW4iLCJhZGRyZXNzIiwiaXNDb25uZWN0ZWQiLCJjb25uZWN0QXN5bmMiLCJkaXNjb25uZWN0Iiwid2FnbWlEaXNjb25uZWN0IiwiY29udHJhY3QiLCJzZXRDb250cmFjdCIsImVycm9yIiwic2V0RXJyb3IiLCJpbml0aWFsTG9hZENvbXBsZXRlIiwic2V0SW5pdGlhbExvYWRDb21wbGV0ZSIsImNoZWNrU3RvcmVkQ29ubmVjdGlvbiIsInN0b3JlZENvbm5lY3RlZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjb25uZWN0b3IiLCJlcnIiLCJjb25zb2xlIiwicmVtb3ZlSXRlbSIsInNldEl0ZW0iLCJpbml0aWFsaXplQ29udHJhY3QiLCJ3aW5kb3ciLCJldGhlcmV1bSIsInByb3ZpZGVyIiwiQnJvd3NlclByb3ZpZGVyIiwic2lnbmVyIiwiZ2V0U2lnbmVyIiwiY29udHJhY3RJbnN0YW5jZSIsIm1lc3NhZ2UiLCJjb25uZWN0IiwicmVudEZpbG0iLCJmaWxtSWQiLCJwcmljZSIsImZpbG1UaXRsZSIsImZpbG1Qb3N0ZXIiLCJFcnJvciIsInN0b3JlZFJlbnRhbHNLZXkiLCJ0b0xvd2VyQ2FzZSIsInN0b3JlZFJlbnRhbHMiLCJ1c2VyUmVudGFscyIsIkpTT04iLCJwYXJzZSIsIm5vdyIsIkRhdGUiLCJpc0FscmVhZHlSZW50ZWQiLCJzb21lIiwicmVudGFsIiwiZXhwaXJlc0F0IiwidXNlckFkZHJlc3MiLCJnZXRBZGRyZXNzIiwiYWRtaW5BZGRyZXNzIiwiZXRoQmFsYW5jZSIsImdldEJhbGFuY2UiLCJwcmljZVdlaSIsInBhcnNlRXRoZXIiLCJsb2ciLCJ0eCIsInNlbmRUcmFuc2FjdGlvbiIsInRvIiwidmFsdWUiLCJ3YWl0Iiwic2V2ZW5EYXlzSW5NcyIsIm5ld1JlbnRhbCIsImlkIiwidGl0bGUiLCJwb3N0ZXIiLCJyZW50ZWRBdCIsInRvSVNPU3RyaW5nIiwic3RhdHVzIiwicHVzaCIsImZpbG1zUmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiZmlsbXMiLCJqc29uIiwiZmlsbUluZGV4IiwiZmluZEluZGV4IiwiZmlsbSIsInJlbnRhbHMiLCJyZXZlbnVlIiwicGFyc2VGbG9hdCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic3RyaW5naWZ5IiwidXBkYXRlRXJyb3IiLCJjb2RlIiwicmVhc29uIiwiaW5jbHVkZXMiLCJlbmRSZW50YWwiLCJnZXRGaWxtUHJpY2UiLCJpc0ZpbG1BdmFpbGFibGUiLCJnZXRVc2VyUmVudGFscyIsIlByb3ZpZGVyIiwiYWNjb3VudCIsImRpdiIsInN0eWxlIiwiY29sb3IiLCJtYXJnaW5Cb3R0b20iLCJ1c2VXZWIzIiwiY29udGV4dCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/contexts/Web3Context.tsx\n"));

/***/ })

});